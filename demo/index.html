<html>
	<head>
		<script type='text/javascript' src='../dist/lapidary.iife.js'></script>
		<link rel="stylesheet" href="./style.css" media="screen" />
	</head>
	<body>
		<script>
			var items = [
			  {
			    name: 'War and Peace',
			    edition: 2,
			    pagecount: 500,
			  },
			  {
			    name: 'Harry Potter and the Sorcerers Stone',
			    edition: 1,
			    pagecount: 300
			  },
			  {
			    name: 'Harry Potter and the Order of the Phoenix',
			    edition: 1,
			    pagecount: 560
			  },
			  {
			  	name: 'The Return of the King',
			  	edition: 2,
			  	pagecount: 446
			  },
			  {
			  	name: 'Herp a derp',
			  	edition: 1,
			  	pagecount: 320
			  }
			];
			var facets = {
			  name: {
			    operations: lapidary.StringOperations
			  },
			  edition: {
			  	operations: lapidary.NumericOperations
			  },
			  pagecount: {
			  	operations: lapidary.NumericOperations
			  }
			};
			var l = new lapidary.Lapidary(items, facets, {});
			var handleInputChange = function() {
				var query = document.getElementById("lapidary-input").value;
				//console.log(query);
				var results = lapidary.parseQuery(query, l);
				//var resultsArr = JSON.stringify(results);
				var outputDiv = document.getElementById("output");
				outputDiv.innerHTML = "";
				for (r of results) {
					var e = document.createElement('div');
					e.innerHTML = JSON.stringify(r);
					outputDiv.appendChild(e);
				}

			}
			document.addEventListener('DOMContentLoaded', handleInputChange, false);
		</script>
		<input id="lapidary-input" onchange="handleInputChange()" type="text"/>
		<div id="output"></div>
	</body>
</html>